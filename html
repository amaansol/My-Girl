<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>For You, My Love ‚ù§Ô∏è</title>
<meta name="theme-color" content="#ff7aa2" />
<style>
  :root{
    --bg0:#0f1020;
    --bg1:#17182d;
    --pink:#ff7aa2;
    --rose:#ff4d7e;
    --lav:#b79cff;
    --mint:#7bf1a8;
    --gold:#ffdd66;
    --text:#f7f7fb;
    --muted:#c9c9d9;
    --card:rgba(255,255,255,.08);
    --glass:rgba(255,255,255,.12);
    --blur:12px;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg0),var(--bg1));color:var(--text);font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji";scroll-behavior:smooth;overflow-x:hidden}
  a{color:inherit}
  /* Global utilities */
  .center{display:flex;align-items:center;justify-content:center}
  .btn{padding:.85rem 1.2rem;border-radius:999px;background:var(--text);color:#1b1b1f;font-weight:700;border:0;cursor:pointer;transition:transform .15s ease,opacity .2s}
  .btn:active{transform:scale(.98)}
  .btn.secondary{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,.25);backdrop-filter:blur(6px)}
  .chip{display:inline-flex;align-items:center;gap:.5rem;padding:.4rem .75rem;border-radius:999px;background:var(--glass);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.14);font-size:.85rem;color:var(--muted)}
  .glass{background:var(--glass);backdrop-filter:blur(var(--blur));border:1px solid rgba(255,255,255,.15)}
  .shadow{box-shadow:0 30px 80px rgba(0,0,0,.35)}
  .hidden{opacity:0;transform:translateY(20px);filter:blur(4px)}
  .reveal{opacity:1;transform:none;filter:none;transition:opacity .9s cubic-bezier(.2,.8,.2,1),transform .9s cubic-bezier(.2,.8,.2,1),filter .9s}
  /* Layered stage */
  .stage{position:fixed;inset:0;overflow:hidden;pointer-events:none}
  canvas#stars,canvas#hearts,canvas#confetti{position:absolute;inset:0}
  /* Navigation / music */
  .hud{position:fixed;top:16px;left:16px;right:16px;display:flex;align-items:center;justify-content:space-between;z-index:40}
  .hud .left, .hud .right{display:flex;align-items:center;gap:.5rem}
  .hud .right .btn{padding:.6rem .9rem}
  .logo{font-weight:900;letter-spacing:.5px}
  .logo span{background:linear-gradient(90deg,var(--rose),var(--lav));-webkit-background-clip:text;background-clip:text;color:transparent}
  .music-ind{width:10px;height:10px;border-radius:50%;background:#e44;box-shadow:0 0 0 0 rgba(255,122,162,.8);animation:pulse 1.8s infinite}
  @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(255,122,162,.7)}70%{box-shadow:0 0 0 10px rgba(255,122,162,0)}100%{box-shadow:0 0 0 0 rgba(255,122,162,0)}}
  /* Sections */
  section.layer{min-height:100svh;position:relative;z-index:10;padding:clamp(48px,6vw,96px) 18px;display:grid;place-items:center;text-align:center}
  .layer .card{max-width:min(900px,92vw);padding:clamp(22px,2.5vw,36px);border-radius:28px}
  h1{font-size:clamp(38px,6vw,72px);line-height:1.05;margin:0 0 .6rem}
  h2{font-size:clamp(24px,4.2vw,42px);line-height:1.15;margin:.2rem 0 .75rem}
  p{color:var(--muted);font-size:clamp(15px,1.6vw,18px);margin:.25rem 0 1rem}
  /* Typewriter */
  .type{display:inline-block;border-right:2px solid var(--text);white-space:nowrap;overflow:hidden}
  /* Parallax decorations */
  .orb{position:absolute;border-radius:50%;filter:blur(40px);opacity:.6;pointer-events:none;mix-blend-mode:screen}
  .orb.pink{background:radial-gradient(closest-side,#ff7aa2,#0000);width:38vmax;height:38vmax;top:-12vmax;left:-12vmax}
  .orb.lav{background:radial-gradient(closest-side,#b79cff,#0000);width:32vmax;height:32vmax;bottom:-10vmax;right:-12vmax}
  .orb.mint{background:radial-gradient(closest-side,#7bf1a8,#0000);width:20vmax;height:20vmax;top:40%;left:60%}
  /* Gallery */
  .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-top:16px}
  .gallery figure{position:relative;overflow:hidden;border-radius:18px;aspect-ratio:3/4;transform:translateZ(0)}
  .gallery img{width:100%;height:100%;object-fit:cover;transition:transform .6s ease}
  .gallery figure:hover img{transform:scale(1.08)}
  .tag{position:absolute;left:10px;bottom:10px;background:rgba(0,0,0,.35);padding:.35rem .6rem;border-radius:999px;font-size:.75rem}
  /* CTA row */
  .row{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center;justify-content:center}
  /* Footer */
  footer{padding:40px 16px 60px;color:var(--muted);text-align:center}
  /* Mobile safe spacing for bottom buttons */
  .safe{height:env(safe-area-inset-bottom)}
</style>
</head>
<body>

<!-- Decorative particle canvases -->
<div class="stage">
  <canvas id="stars"></canvas>
  <canvas id="hearts"></canvas>
  <canvas id="confetti"></canvas>
</div>

<!-- HUD -->
<div class="hud">
  <div class="left">
    <div class="logo chip">for <span id="herNameChip"><span>Her</span></span> ‚ú®</div>
    <div id="musicDot" class="music-ind" title="Music playing" style="opacity:.0"></div>
  </div>
  <div class="right">
    <button id="musicBtn" class="btn secondary" aria-pressed="false">üîä Play music</button>
    <a href="#layer-love" class="btn">Start the Journey ‚ûú</a>
  </div>
</div>

<!-- LAYER 1: Intro + Typewriter -->
<section id="layer-love" class="layer">
  <div class="orb pink" data-parallax="-.06"></div>
  <div class="orb lav" data-parallax=".08"></div>
  <div class="orb mint" data-parallax=".12"></div>
  <article class="card glass shadow hidden" data-reveal>
    <h1 id="typewriter" class="type" aria-label=""></h1>
    <p id="subline">Scroll or tap below. Every layer is a little piece of my heart.</p>
    <div class="row">
      <a class="btn" href="#layer-memories">Next layer üí´</a>
      <button class="btn secondary" id="tiltToggle">3D Tilt: Off</button>
    </div>
  </article>
</section>

<!-- LAYER 2: Memories Gallery -->
<section id="layer-memories" class="layer">
  <article class="card glass shadow hidden" data-reveal>
    <h2>Our little universe üì∏</h2>
    <p>Some moments I keep replaying in my head (and now right here).</p>
    <div id="gallery" class="gallery" aria-live="polite"></div>
    <div class="row" style="margin-top:10px">
      <a class="btn" href="#layer-words">Next layer ‚úçÔ∏è</a>
      <button class="btn secondary" id="shuffle">Shuffle</button>
    </div>
  </article>
</section>

<!-- LAYER 3: Words -->
<section id="layer-words" class="layer">
  <article class="card glass shadow hidden" data-reveal>
    <h2>Things I love about you üåπ</h2>
    <p id="listText">Loading my words‚Ä¶</p>
    <div class="row">
      <a class="btn" href="#layer-countdown">Next layer ‚è≥</a>
      <button class="btn secondary" id="copyBtn">Copy as a note</button>
    </div>
  </article>
</section>

<!-- LAYER 4: Countdown to a date -->
<section id="layer-countdown" class="layer">
  <article class="card glass shadow hidden" data-reveal>
    <h2>Counting down to us ‚è≥</h2>
    <p>Just a tiny wait until the next special day.</p>
    <div class="chip" id="countdown">Calculating‚Ä¶</div>
    <div style="margin-top:10px" class="row">
      <a class="btn" href="#layer-surprise">Final surprise üéÅ</a>
      <button class="btn secondary" id="setDate">Change date</button>
    </div>
  </article>
</section>

<!-- LAYER 5: Final reveal -->
<section id="layer-surprise" class="layer">
  <article class="card glass shadow hidden" data-reveal>
    <h2 id="finalHeader">Always yours üíç</h2>
    <p id="finalNote">Tap the button when you‚Äôre ready‚Ä¶</p>
    <div class="row">
      <button class="btn" id="revealBtn">Reveal</button>
      <button class="btn secondary" id="fireworksBtn">Fireworks üéÜ</button>
    </div>
    <div class="safe"></div>
  </article>
</section>

<!-- Audio -->
<audio id="bgm" preload="auto" loop>
  <!-- Replace with your own audio file in the same folder if you want -->
  <source src="" type="audio/mpeg" />
</audio>

<script>
/* ================================
   QUICK CONFIG ‚Äî edit this part
=================================== */
const CONFIG = {
  herName: "My Love",
  openingLines: [
    "Hey {name} üíñ",
    "I built you a tiny universe.",
    "Each layer holds a piece of us."
  ],
  wordsILove: [
    "Your laugh that derails my day in the best way.",
    "How you say my name like it belongs to you.",
    "Your courage when the world gets loud.",
    "Your eyes when you pretend you‚Äôre not smiling.",
    "The way ordinary moments turn golden with you."
  ],
  finalMessage: "No matter the day, the plan, the place‚Äîit's always you. Always.",
  anniversary: "2025-12-31T00:00:00", // ISO string ‚Äî change this!
  galleryImages: [
    // Drop your image URLs here (relative paths or https links)
    // e.g. "img/us-01.jpg", "img/us-02.jpg"
    "https://images.unsplash.com/photo-1516905041604-7935af78f584?q=80&w=1000",
    "https://images.unsplash.com/photo-1517074018870-3cf2b056598d?q=80&w=1000",
    "https://images.unsplash.com/photo-1504196606672-aef5c9cefc92?q=80&w=1000",
    "https://images.unsplash.com/photo-1491438590914-bc09fcaaf77a?q=80&w=1000",
    "https://images.unsplash.com/photo-1513151233558-d860c5398176?q=80&w=1000",
    "https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=80&w=1000"
  ],
  backgroundMusic: "" // e.g. "bgm.mp3"
};

/* ===================================
   Helpers
======================================*/
const qs = s => document.querySelector(s);
const qsa = s => [...document.querySelectorAll(s)];
const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));
function shuffleArray(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}
function plural(n, w){return n===1? w : w+'s'}

/* ===================================
   HUD & Config apply
======================================*/
qs('#herNameChip').innerHTML = `<span>${CONFIG.herName}</span>`;
if(CONFIG.backgroundMusic) { qs('#bgm').src = CONFIG.backgroundMusic; }

/* ===================================
   Typewriter Intro
======================================*/
(function typewriter(){
  const el = qs('#typewriter');
  const lines = CONFIG.openingLines.map(l=>l.replace('{name}', CONFIG.herName));
  const text = lines.join('  ');
  el.setAttribute('aria-label', text);
  let i=0; const speed=45;
  function tick(){
    el.textContent = text.slice(0,i);
    i++;
    if(i<=text.length){ setTimeout(tick, speed); }
    else { el.style.borderRight = '0'; }
  }
  tick();
})();

/* ===================================
   Reveal on scroll
======================================*/
const io = new IntersectionObserver(entries=>{
  entries.forEach(e=>{
    if(e.isIntersecting){ e.target.classList.add('reveal'); io.unobserve(e.target); }
  });
},{threshold:.2});
qsa('[data-reveal]').forEach(n=>io.observe(n));

/* ===================================
   Parallax (decorative orbs + pointer parallax)
======================================*/
const layers = qsa('[data-parallax]');
window.addEventListener('scroll',()=>{
  const y = window.scrollY;
  layers.forEach(el=>{
    const f = parseFloat(el.dataset.parallax||0);
    el.style.transform = `translate3d(0, ${y*f}px, 0)`;
  });
});

let tiltEnabled=false;
qs('#tiltToggle').addEventListener('click',()=>{
  tiltEnabled=!tiltEnabled;
  qs('#tiltToggle').textContent = `3D Tilt: ${tiltEnabled?'On':'Off'}`;
});
document.addEventListener('pointermove',(e)=>{
  if(!tiltEnabled) return;
  const {innerWidth:w, innerHeight:h} = window;
  const rx = ((e.clientY/h)-.5)*10;
  const ry = ((e.clientX/w)-.5)*-10;
  qsa('.card').forEach(c=>{
    c.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
  });
});
document.addEventListener('pointerleave',()=>{
  qsa('.card').forEach(c=>c.style.transform='');
});

/* ===================================
   Stars background (canvas)
======================================*/
(function stars(){
  const c = qs('#stars'), ctx = c.getContext('2d');
  let W,H,stars=[];
  function resize(){ W=c.width=innerWidth*devicePixelRatio; H=c.height=innerHeight*devicePixelRatio; }
  function init(){
    resize();
    stars = Array.from({length:180},()=>({
      x:Math.random()*W, y:Math.random()*H, r:Math.random()*1.6+0.2, s:Math.random()*0.6+0.2
    }));
    loop();
  }
  window.addEventListener('resize', resize);
  function loop(){
    ctx.clearRect(0,0,W,H);
    ctx.fillStyle='white';
    stars.forEach(st=>{
      st.y += st.s; if(st.y>H) st.y = -5;
      ctx.globalAlpha = 0.7+Math.sin((st.x+st.y)/1000)*0.3;
      ctx.beginPath(); ctx.arc(st.x, st.y, st.r, 0, Math.PI*2); ctx.fill();
    });
    requestAnimationFrame(loop);
  }
  init();
})();

/* ===================================
   Hearts particles (rise slowly)
======================================*/
(function hearts(){
  const c=qs('#hearts'), ctx=c.getContext('2d');
  let W,H,parts=[];
  function resize(){ W=c.width=innerWidth*devicePixelRatio; H=c.height=innerHeight*devicePixelRatio; }
  function heartPath(x,y,s=10){
    ctx.save(); ctx.translate(x,y); ctx.scale(s,s); ctx.beginPath();
    ctx.moveTo(0,0.35);
    ctx.bezierCurveTo(0,0.15,-.2,0,-.35,0);
    ctx.bezierCurveTo(-.7,0,-.7,.45,-.7,.45);
    ctx.bezierCurveTo(-.7,.7,-.4,.9,0,1.1);
    ctx.bezierCurveTo(.4,.9,.7,.7,.7,.45);
    ctx.bezierCurveTo(.7,.45,.7,0,.35,0);
    ctx.bezierCurveTo(.2,0,0,.15,0,.35);
    ctx.closePath();
    ctx.restore();
  }
  function init(){
    resize();
    parts = Array.from({length:36},()=>({
      x:Math.random()*W, y:H+Math.random()*H*.6, vy:-(Math.random()*0.5+0.25),
      s:(Math.random()*0.8+0.3)/20, a:Math.random()*Math.PI*2
    }));
    loop();
  }
  window.addEventListener('resize', resize);
  function loop(){
    ctx.clearRect(0,0,W,H);
    parts.forEach(p=>{
      p.y += p.vy; p.x += Math.sin(p.a+=0.01)*0.7;
      if(p.y< -50) { p.y = H + Math.random()*200; p.x = Math.random()*W; }
      ctx.save();
      ctx.fillStyle='rgba(255,122,162,.55)';
      heartPath(p.x,p.y, (p.s*devicePixelRatio*30));
      ctx.fill();
      ctx.restore();
    });
    requestAnimationFrame(loop);
  }
  init();
})();

/* ===================================
   Confetti (final)
======================================*/
const Confetti = (function(){
  const c=qs('#confetti'), ctx=c.getContext('2d');
  let W,H,bits=[], active=false, t=0;
  function resize(){ W=c.width=innerWidth*devicePixelRatio; H=c.height=innerHeight*devicePixelRatio; }
  function burst(){
    active=true; t=0;
    bits = Array.from({length:180},(_,i)=>({
      x:W/2, y:H/3, vx:(Math.random()-0.5)*8, vy:(Math.random()*-6-3),
      g:0.15, w:6+Math.random()*6, h:2+Math.random()*6, r:Math.random()*Math.PI,
      c: ['#ff7aa2','#b79cff','#7bf1a8','#ffdd66','#ffffff'][i%5]
    }));
  }
  function loop(){
    if(!active) { requestAnimationFrame(loop); return; }
    ctx.clearRect(0,0,W,H);
    bits.forEach(b=>{
      b.vy += b.g;
      b.x += b.vx; b.y += b.vy; b.r += 0.1;
      ctx.save(); ctx.translate(b.x,b.y); ctx.rotate(b.r);
      ctx.fillStyle=b.c; ctx.fillRect(-b.w/2,-b.h/2,b.w,b.h);
      ctx.restore();
    });
    t++;
    if(t>600) { active=false; ctx.clearRect(0,0,W,H); }
    requestAnimationFrame(loop);
  }
  window.addEventListener('resize', resize);
  resize(); loop();
  return { burst };
})();

/* ===================================
   Gallery population
======================================*/
const galleryEl = qs('#gallery');
function renderGallery(arr){
  galleryEl.innerHTML = '';
  arr.forEach((src,i)=>{
    const fig = document.createElement('figure');
    const img = document.createElement('img'); img.loading='lazy'; img.src=src;
    const tag = document.createElement('div'); tag.className='tag'; tag.textContent = `#${i+1}`;
    fig.appendChild(img); fig.appendChild(tag); galleryEl.appendChild(fig);
  });
}
renderGallery(CONFIG.galleryImages);
qs('#shuffle').addEventListener('click',()=>renderGallery(shuffleArray([...CONFIG.galleryImages])));

/* ===================================
   Words I love
======================================*/
qs('#listText').textContent = CONFIG.wordsILove.map((w,i)=>`${i+1}. ${w}`).join('  ');
qs('#copyBtn').addEventListener('click', async ()=>{
  const text = `For ${CONFIG.herName}\n\n` + CONFIG.wordsILove.map((w,i)=>`${i+1}. ${w}`).join('\n');
  try { await navigator.clipboard.writeText(text); qs('#copyBtn').textContent='Copied ‚úÖ'; setTimeout(()=>qs('#copyBtn').textContent='Copy as a note', 1400);} catch(e){}
});

/* ===================================
   Countdown
======================================*/
function updateCountdown(){
  const el=qs('#countdown');
  const target = new Date(CONFIG.anniversary);
  const now = new Date();
  let delta = target - now;
  if(delta < 0){ el.textContent = "It's today! üéâ"; return; }
  const d = Math.floor(delta/(1000*60*60*24)); delta -= d*86400000;
  const h = Math.floor(delta/(1000*60*60)); delta -= h*3600000;
  const m = Math.floor(delta/(1000*60)); delta -= m*60000;
  const s = Math.floor(delta/1000);
  el.textContent = `${d} ${plural(d,"day")} ${h}h ${m}m ${s}s`;
}
setInterval(updateCountdown, 1000); updateCountdown();
qs('#setDate').addEventListener('click',()=>{
  const v = prompt("Enter a special date/time (YYYY-MM-DD or ISO)", CONFIG.anniversary);
  if(!v) return;
  const test = new Date(v);
  if(isNaN(test.getTime())) { alert("I couldn't understand that date ü•≤"); return; }
  CONFIG.anniversary = test.toISOString();
  updateCountdown();
});

/* ===================================
   Music controls
======================================*/
const audio = qs('#bgm');
const musicBtn = qs('#musicBtn');
const musicDot = qs('#musicDot');
let musicOn=false;
async function toggleMusic(){
  if(!audio.src){ alert("Add a music file in CONFIG.backgroundMusic to enable audio üéµ"); return; }
  try{
    if(!musicOn){ await audio.play(); musicOn=true; musicBtn.textContent='‚è∏Ô∏è Pause music'; musicBtn.setAttribute('aria-pressed','true'); musicDot.style.opacity=1; }
    else{ audio.pause(); musicOn=false; musicBtn.textContent='üîä Play music'; musicBtn.setAttribute('aria-pressed','false'); musicDot.style.opacity=.0; }
  }catch(e){ console.warn(e); }
}
musicBtn.addEventListener('click', toggleMusic);

/* ===================================
   Final reveal & fireworks
======================================*/
qs('#revealBtn').addEventListener('click',()=>{
  qs('#finalHeader').innerHTML = `Forever, ${CONFIG.herName} ‚ù§Ô∏è`;
  qs('#finalNote').textContent = CONFIG.finalMessage;
  Confetti.burst();
});
qs('#fireworksBtn').addEventListener('click',()=>Confetti.burst());

/* ===================================
   Small touches
======================================*/
window.addEventListener('load',()=>{
  // Improve perceived performance of hover effects on mobile
  document.body.style.cursor='default';
});
</script>

</body>
</html>
